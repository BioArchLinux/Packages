#!/bin/bash

# Maintainer: PumpkinCheshire <me at pumpkincheshire dot com>
# Contributor: Fabio Zanini <fabio.zanini _at_ stanford.edu>

pkgname=python-pysam
_name=pysam
pkgver=0.23.0
_pkgver=0.19.1
pkgrel=1
pkgdesc='Python interface for the SAM/BAM sequence alignment and mapping format'
arch=('x86_64')
url="https://github.com/pysam-developers/pysam"
license=('MIT')
depends=('python')
makedepends=(
  'python-setuptools'
  'cython'
  'htslib'
)
provides=('python-pysam')
options=(!emptydirs)
source=("https://github.com/pysam-developers/${_name}/archive/v${pkgver}.tar.gz")
b2sums=('74f5fd99aff357c59aa4cd13214fbb87577d213461feff2afd59679c6b442ccee1fe23a7b7d6ddc723f57f4e00516fb7b67207e8f8619b707d1f909c62663006')

build() {
  cd "$srcdir/$_name-$pkgver"

  export HTSLIB_LIBRARY_DIR=/usr/lib
  export HTSLIB_INCLUDE_DIR=/usr/include

  python setup.py build
}

package() {
  cd "$srcdir/$_name-$pkgver"
  python setup.py install --root="$pkgdir/" --optimize=1 --skip-build
  install -Dm644 "$srcdir/$_name-$pkgver/COPYING" -t "$pkgdir/usr/share/licenses/$pkgname"
}
