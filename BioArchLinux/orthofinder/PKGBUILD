# Maintainer: Guoyi Zhang <guoyizhang at malacology dot net>
pkgname=orthofinder
_pkgname=OrthoFinder
pkgver=2.5.5
pkgrel=1
pkgdesc="Phylogenetic orthology inference for comparative genomics"
arch=('any')
url="https://github.com/davidemms/OrthoFinder"
license=('GPL-3.0-only')
depends=('python' 'python-scipy' 'blast' 'diamond' 'mcl' 'fastme' 'mafft' 'fasttree' 'muscle' 'raxml' 'raxml-ng' 'iqtree' 'bzip2' 'mmseqs2')
source=($url/archive/refs/tags/$pkgver.tar.gz)
sha256sums=('66d179a7c82110f094cc414d4860601b8c28434875a30c05ec3841df52e086d1')
build() {

  cp orthofinder.py $pkgdir/usr/share/$pkgname/$pkgname

  mkdir -p $pkgdir/usr/share/$pkgname/scripts_of
  cp -r scripts_of/*py $pkgdir/usr/share/$pkgname/scripts_of/

  sed -i 's/raxmlHPC-AVX/raxmlHPC-AVX2/g' scripts_of/config.json
  cp scripts_of/config.json $pkgdir/usr/share/$pkgname/scripts_of/config.json
 
  ln -s /usr/share/$pkgname/$pkgname ${pkgdir}/usr/bin/$pkgname

}
