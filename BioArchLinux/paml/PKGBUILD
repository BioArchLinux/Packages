# Maintainer: Guoyi Zhang <guoyizhang at malacology dot net>
pkgname=paml
pkgver=4.10.0
pkgrel=1
pkgdesc="Phylogenetic analysis by maximum likelihood"
arch=('x86_64')
url="http://abacus.gene.ucl.ac.uk/software/"
license=('GPL3')
depends=('glibc')
makedepends=('make')
provides=('paml')
source=("https://github.com/abacus-gene/paml/archive/refs/tags/v${pkgver}.zip")
sha256sums=('ab96c0a140f00e50627d1ff2bad880213143a49b2a0ce848d6cdb5c295d7c6a7')
prepare(){
	cd "$pkgname-$pkgver"/
	mkdir bin
}
build() {
	cd "$pkgname-$pkgver"/src
#	gcc -O3 -o baseml baseml.c tools.c
#	gcc -O3 -o basemlg basemlg.c tools.c
#	gcc -O3 -o codeml codeml.c tools.c
#	gcc -O3 -o pamp pamp.c tools.c
#	gcc -O3 -o mcmctree mcmctree.c tools.c
#	gcc -O3 -o evolver evolver.c tools.c
#	gcc -O3 -o yn00 yn00.c tools.c 
#	gcc -O3 -o chi2 chi2.c 
	make -f Makefile
	ls -lF
	rm *.o
	mv baseml basemlg codeml pamp evolver yn00 chi2 ../bin
}

package() {
	mkdir -p $pkgdir/usr/{bin,share/{$pkgname,licenses/$pkgname}}
	cd "$pkgname-$pkgver"
	cp bin/* $pkgdir/usr/bin
	cp -r doc/ $pkgdir/usr/share/$pkgname
	cp    LICENSE $pkgdir/usr/share/licenses/$pkgname
	cp -r Technical $pkgdir/usr/share/$pkgname
}

